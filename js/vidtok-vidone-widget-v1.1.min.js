jQuery(document).ready(function(c){var b=jQuery.url().param("vid");if("undefined"==b||null==b)b="";"yes"===VIDONE_REGISTERED&&jQuery("body").append('<div class="vidone-widget-w"> <div class="vidone-widget-invite-email"> <div id="vidone-invalid-email">Oops! Not a valid email</div> <p>Invite friend to join video chat</p> <input type="text" name="email" id="email" value="" /> <input type="button" name="vidone-invite-submit" id="vidone-invite-submit" value="Send Invite" class="invite btn btn-info" /> </div> <div class="vidone-widget-video-w"> <div class="vidone-widget-video-h" id="pub"> <div id="vidone-pub"><img src="'+
VIDONE_PLUGIN_URL+'img/large-loader-cyan.gif" alt="loading" /><p>Loading Video Connection...</p></div> </div> <div class="vidone-widget-video-h" id="sub"> <div id="vidone-sub"><p>Your guest will appear here...</p></div> </div> <div class="vidone-widget-access"> <div class="vidone-widget-start"> <p>Want to start a new video chat?</p> <input type="button" class="start btn btn-info" id="create-button" value="Create Video Chat" /> </div> <div class="vidone-widget-join"> <div id="vidone-invalid">Oops! Wrong code, try again</div> <p>Join an existing video chat</p> <input type="text" name="vid" id="vid" value="'+
b+'" /> <input type="button" name="vidone-join-submit" id="vidone-join-submit" value="Join Existing Video Chat" class="join btn btn-info" /> </div> </div> </div> <div class="vidone-widget-chat-bubble" id="bubble"><img src="'+VIDONE_PLUGIN_URL+'img/video-chat-bubble.png" alt="vidtok vid {one} chat bubble"/></div> <div class="vidone-widget-action-bar"> <div id="vidone-widget-default-view"> <div class="vidone-start-msg vidone-widget-default-msg-size"> <div class="vidone-widget-action-bar-arrow" id="up-arrow"> <img src="'+
VIDONE_PLUGIN_URL+'img/up-arrow.png" alt="vidtok vid {one} start" /> </div> <p>Start a <strong>"LIVE"</strong> video chat!</p> </div> </div> <div class="vidone-widget-chat-view"> <div class="vidone-widget-invite"> <p>Send Invite via</p> <a rel="invite-email" style="border:none; text-decoration:none;" href="#"><img src="'+VIDONE_PLUGIN_URL+'img/envolope.png" alt="" /></a> <a rel="nofollow" style="border:none; text-decoration:none;" href="#" onclick="return fbs_click()" target="_blank"><img src="'+
VIDONE_PLUGIN_URL+'img/facebook.png" alt="" /></a> <a rel="nofollow" style="border:none; text-decoration:none;" href="#" onclick="return tw_click()" target="_blank"><img src="'+VIDONE_PLUGIN_URL+'img/twitter.png" alt="" /></a> </div> <div class="vidone-widget-get-vidone"> <p><a href="http://wordpress.org/plugins/vidtok-vidone-video-chat-using-tokboxs-opentok-api/" target="_blank">Download vid{one}</a> for Wordpress</p> </div> <div class="vidone-end-msg vidone-widget-default-msg-size" style="width:226px; border-left:1px #e4e4e4 solid; "> <div class="vidone-widget-action-bar-arrow" id="end-arrow"><img src="'+
VIDONE_PLUGIN_URL+'img/down-arrow.png" alt="vidtok vid {one} end"/></div> <p>End your video chat</p> </div> </div> </div> </div>');invite=clicked=start=0;jQuery(".vidone-start-msg").show();jQuery("#vid").watermark("Enter Invitation Code");jQuery("#email").watermark("Enter Email Address");setTimeout(function(){jQuery(".vidone-widget-w").animate({right:"20px"})},750);jQuery.url().param("vid")&&"yes"===VIDONE_REGISTERED&&setTimeout(function(){jQuery("#vidone-invalid").hide();jQuery("#vidone-widget-default-view").empty();
jQuery("#vidone-widget-default-view").append('<div class="vidone-close-msg vidone-widget-default-msg-size"> <div class="vidone-widget-action-bar-arrow" id="down-arrow"> <img src="'+VIDONE_PLUGIN_URL+'img/down-arrow.png" alt="vidtok vid {one} close" /> </div> <p>Close video start window</p> </div>');jQuery(".vidone-close-msg").fadeIn("slow");jQuery(".vidone-widget-chat-bubble").animate({bottom:"-200px"},375,function(){jQuery(".vidone-widget-access").animate({bottom:"390px"});clicked=0});jQuery.ajax({url:vidoneAjax.ajaxurl,
type:"POST",data:{action:"join_session",vid:b},dataType:"json",success:function(a){"non-existing"===a.status&&jQuery("#vidone-invalid").fadeIn();"exists"===a.status&&(jQuery.ajax({url:"http://vidtok.co/vidone/usage",type:"POST",data:{vapi:VAPI,domain:DOMAIN,type:"join"}}),jQuery(".vidone-widget-invite").hide(),jQuery(".vidone-widget-get-vidone").show(),jQuery("#vidone-invalid").hide(),vidone(),VID=a.vid,TOKBOX_SESSION_ID=a.session_id,TOKBOX_TOKEN=a.token,setTimeout(function(){TB.setLogLevel(TB.DEBUG);
session=TB.initSession(TOKBOX_SESSION_ID);session.addEventListener("sessionConnected",sessionConnectedHandler);session.addEventListener("streamCreated",streamCreatedHandler);session.addEventListener("streamDestroyed",streamDestroyedHandler);session.connect("21436142",TOKBOX_TOKEN);jQuery("#controller_"+TOKBOX_SESSION_ID).css({width:"0px",height:"0px"})},2500))}})},1250);jQuery("div").on("click","#up-arrow",function(a){a.preventDefault();0==clicked&&(access(),clicked++)});jQuery("div").on("click",
"#bubble",function(a){a.preventDefault();0==clicked&&(access(),clicked++)});jQuery("div").on("click","#down-arrow",function(a){a.preventDefault();0==clicked&&(cAccess(),clicked++)});jQuery("div").on("click","#end-arrow",function(a){a.preventDefault();0==clicked&&(cVidone(),clicked++)});jQuery("a[rel='invite-email']").toggle(function(a){a.preventDefault();jQuery(".vidone-widget-invite-email").animate({bottom:"80px"})},function(a){a.preventDefault();jQuery("#vidone-invalid-email").hide();jQuery(".vidone-widget-invite-email").animate({bottom:"-140px"})});
jQuery("#vidone-invite-submit").on("click",function(a){a.preventDefault();a=jQuery("#email").val();jQuery.ajax({url:vidoneAjax.ajaxurl,type:"POST",data:{action:"invite_email",vid:VID,email:a,url:VIDONE_INVITE_URL},dataType:"json",success:function(a){"invalid"===a.status&&jQuery("#vidone-invalid-email").fadeIn();"valid"===a.status&&(jQuery("#vidone-invalid-email").hide(),jQuery(".vidone-widget-invite-email").animate({bottom:"-140px"}))}})});jQuery("#vidone-join-submit").on("click",function(a){a.preventDefault();
jQuery("#vidone-invalid").hide();a=jQuery("#vid").val();jQuery.ajax({url:vidoneAjax.ajaxurl,type:"POST",data:{action:"join_session",vid:a},dataType:"json",success:function(a){"non-existing"===a.status&&jQuery("#vidone-invalid").fadeIn();"exists"===a.status&&(jQuery.ajax({url:"http://vidtok.co/vidone/usage",type:"POST",data:{vapi:VAPI,domain:DOMAIN,type:"join"}}),jQuery(".vidone-widget-invite").hide(),jQuery(".vidone-widget-get-vidone").show(),jQuery("#vidone-invalid").hide(),vidone(),VID=a.vid,TOKBOX_SESSION_ID=
a.session_id,TOKBOX_TOKEN=a.token,setTimeout(function(){TB.setLogLevel(TB.DEBUG);session=TB.initSession(TOKBOX_SESSION_ID);session.addEventListener("sessionConnected",sessionConnectedHandler);session.addEventListener("streamCreated",streamCreatedHandler);session.addEventListener("streamDestroyed",streamDestroyedHandler);session.connect("21436142",TOKBOX_TOKEN);jQuery("#controller_"+TOKBOX_SESSION_ID).css({width:"0px",height:"0px"})},2500))}})});jQuery("div").on("click",".start",function(a){0==start&&
(jQuery(".vidone-widget-get-vidone").hide(),jQuery(".vidone-widget-invite").show(),vidone(),jQuery.ajax({url:vidoneAjax.ajaxurl,type:"POST",data:{action:"create_session"},dataType:"json",success:function(a){jQuery.ajax({url:"http://vidtok.co/vidone/usage",type:"POST",data:{vapi:VAPI,domain:DOMAIN,type:"create"}});VID=a.vid;TOKBOX_SESSION_ID=a.session_id;TOKBOX_TOKEN=a.token;setTimeout(function(){TB.setLogLevel(TB.DEBUG);session=TB.initSession(TOKBOX_SESSION_ID);session.addEventListener("sessionConnected",
sessionConnectedHandler);session.addEventListener("streamCreated",streamCreatedHandler);session.addEventListener("streamDestroyed",streamDestroyedHandler);session.connect("21436142",TOKBOX_TOKEN);jQuery("#controller_"+TOKBOX_SESSION_ID).css({width:"0px",height:"0px"})},750)}}),start++)})});
function access(){jQuery(".vidone-widget-video-h").hide();jQuery(".vidone-widget-access").show();jQuery("#vidone-widget-default-view").empty();jQuery("#vidone-widget-default-view").append('<div class="vidone-close-msg vidone-widget-default-msg-size"> <div class="vidone-widget-action-bar-arrow" id="down-arrow"> <img src="'+VIDONE_PLUGIN_URL+'img/down-arrow.png" alt="vidtok vid {one} close" /> </div> <p>Close video start window</p> </div>');jQuery(".vidone-close-msg").fadeIn("slow");jQuery(".vidone-widget-chat-bubble").animate({bottom:"-200px"},
375,function(){jQuery(".vidone-widget-access").animate({bottom:"390px"});start=clicked=0})}
function cAccess(){jQuery("#vidone-widget-default-view").empty();jQuery("#vidone-widget-default-view").append('<div class="vidone-start-msg vidone-widget-default-msg-size"> <div class="vidone-widget-action-bar-arrow" id="up-arrow"> <img src="'+VIDONE_PLUGIN_URL+'img/up-arrow.png" alt="vidtok vid {one} start" /> </div> <p>Start a <strong>"LIVE"</strong> video chat!</p> </div>');jQuery(".vidone-start-msg").fadeIn("slow");jQuery("#vidone-invalid").hide();jQuery(".vidone-widget-access").animate({bottom:"-350px"},
375,function(){jQuery(".vidone-widget-chat-bubble").animate({bottom:"40px"});start=clicked=0})}
function cVidone(){session.disconnect();jQuery("#vidone-invalid-email").hide();jQuery(".vidone-widget-invite-email").animate({bottom:"-140px"});jQuery(".vidone-widget-video-w").animate({bottom:"-350px"},375,function(){jQuery(".vidone-widget-action-bar").animate({width:"276px"},375,function(){jQuery(".vidone-widget-video-h").empty();jQuery("#pub").append('<div id="vidone-pub"><img src="'+VIDONE_PLUGIN_URL+'/img/large-loader-cyan.gif" alt="loading" /><p>Loading Video Connection...</p></div>');jQuery("#sub").append('<div id="vidone-sub"><p>Your guest will appear here...</p></div>');
jQuery(".vidone-widget-chat-view").hide();jQuery("#vidone-widget-default-view").fadeIn();jQuery("#vidone-widget-default-view").empty();jQuery("#vidone-widget-default-view").append('<div class="vidone-start-msg vidone-widget-default-msg-size"> <div class="vidone-widget-action-bar-arrow" id="up-arrow"> <img src="'+VIDONE_PLUGIN_URL+'img/up-arrow.png" alt="vidtok vid {one} start" /> </div> <p>Start a <strong>"LIVE"</strong> video chat!</p> </div>');jQuery(".vidone-start-msg").fadeIn("slow");jQuery(".vidone-widget-chat-bubble").animate({bottom:"40px"});
start=clicked=0})})}function vidone(){jQuery("#vidone-widget-default-view").hide();jQuery(".vidone-widget-access").hide();jQuery(".vidone-widget-video-h").show();jQuery("#vidone-invalid").hide();jQuery(".vidone-widget-access").animate({bottom:"-350px"});jQuery(".vidone-widget-w").animate({right:"0px"});jQuery(".vidone-widget-action-bar").animate({width:"598px"},375,function(){jQuery(".vidone-widget-video-w").animate({bottom:"40px"});jQuery(".vidone-widget-chat-view").fadeIn();start=clicked=0})};